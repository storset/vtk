<?xml version="1.0" encoding="UTF-8"?>
<!-- Only for testing! -->
<!-- Requires dwr library available -->

<beans 
   xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:dwr="http://www.directwebremoting.org/schema/spring-dwr"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
                       http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                       http://www.directwebremoting.org/schema/spring-dwr
                       http://www.directwebremoting.org/schema/spring-dwr-2.0.xsd">
  

  <bean id="dwrService" class="org.vortikal.web.service.ServiceImpl">
    <property name="order" value="-200" />
    <property name="assertions">
      <list>
        <ref bean="webServiceAssertion" />
        <bean class="org.vortikal.web.service.RequestURIRegexpAssertion">
          <property name="pattern" value="^/vrtx/dwr.*" />
        </bean>
      </list>
    </property>
    <property name="handler">
      <dwr:controller id="dwrController" debug="true"/>
    </property>
  </bean>
  
  <bean class="org.vortikal.web.filter.ServletPathMappingRequestFilter" 
        parent="defaultRequestFilterCategoryBean">
    <property name="servletPath" value="/vrtx/dwr" />
  </bean>

  
      
  <!-- Sample exposed through dwr under /vrtx/dwr/test/SearchService -->
  <bean id="DwrSearchService"
       class="org.vortikal.repository.search.SearchServiceImpl">
    <property name="searcher" ref="systemIndexSearcher" />
    <property name="propDef" ref="keywordsPropDef" />
    <dwr:remote javascript="SearchService">
      <dwr:include method="getKeywords" />
      <dwr:include method="getResourcesWithKeyword" />
    </dwr:remote>
  </bean>

</beans>
