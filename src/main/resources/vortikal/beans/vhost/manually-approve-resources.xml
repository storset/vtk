<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
"http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

  <bean id="editor.collection.manuallyApproveResourcesService" class="org.vortikal.web.service.ServiceImpl">
    <property name="parent" ref="manageService" />
    <property name="order" value="-999" />
    <property name="assertions">
      <list>
        <bean class="org.vortikal.web.service.RequestParameterAssertion">
          <property name="parameterName" value="service" />
          <property name="parameterValue" value="manually-approve-resources" />
        </bean>
        <ref bean="resourceInCollection" />
      </list>
    </property>
    <property name="handler" ref="editor.collection.manuallyApproveResourcesHandler" />
  </bean>

  <bean id="editor.collection.manuallyApproveResourcesHandler" class="org.vortikal.web.service.manuallyapprove.ManuallyApproveResourcesHandler">
    <property name="searcher" ref="editor.collection.manuallyApproveResourcesSearcher" />
    <property name="manuallyApproveFromPropDef" ref="manuallyApproveFromPropDef" />
    <property name="manuallyApprovedResourcesPropDef" ref="manuallyApprovedResourcesPropDef" />
    <property name="aggregationPropDef" ref="aggregationPropDef" />
    <property name="recursivePropDef" ref="collection.recursiveListingPropDef" />
  </bean>

  <bean id="abstractManuallyApproveResourcesSearcher" abstract="true" class="org.vortikal.web.service.manuallyapprove.ManuallyApproveResourcesSearcher">
    <property name="listingResourceTypeMappingPointers">
      <map>
        <entry key="article-listing" value="${override.listing.prefix}article" />
        <entry key="event-listing" value="${override.listing.prefix}event" />
      </map>
    </property>
    <property name="aggregationResolver" ref="aggregationResolver" />
    <property name="collectionPropDef" ref="collectionPropDef" />
    <property name="titlePropDef" ref="titlePropDef" />
    <property name="publishDatePropDef" ref="publishDatePropDef" />
    <property name="creationTimePropDef" ref="creationTimePropDef" />
    <property name="manuallyApprovedResourcesPropDef" ref="manuallyApprovedResourcesPropDef" />
  </bean>

  <bean id="editor.collection.manuallyApproveResourcesSearcher" parent="abstractManuallyApproveResourcesSearcher" />

</beans>